<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
<script src="https://unpkg.com/gijgo@1.9.13/js/gijgo.min.js" type="text/javascript"></script>
<link href="https://unpkg.com/gijgo@1.9.13/css/gijgo.min.css" rel="stylesheet" type="text/css" />
<style>
    .backTheme {
        background-color: #35322d;
        color: #FFFFFF;
        padding: 20px;
        border-radius: 7px;
        display: block;
        margin-left: auto;
        margin-right: auto;
        max-width: 900px;
    }

    .tblTheme {
        background-color: #35322d;
        color: #FFFFFF;
        padding: 20px;

    }

    th {
        color: #ffb03b;
    }

    img {
        margin: 20px;
    }

    .table-hover {
        color: white;
         !important
    }

    .center {
        display: block;
        margin-left: auto;
        margin-right: auto;
        width: 100%;
    }
</style>

<div class="backTheme">
    <form action="/staffRestaurant/editRestaurant" method="post">
        <h1 style="text-align: center;">{{restaurant.res_name}}</h1>
        <hr>
        <img id="icon" src="{{restaurant.image}}" alt="" style="width: 400px;" class="center">
        <input style="width: 50%" class="form-control center" type="file" id="restaurantIcon" name="restaurantIcon" accept="image/png,image/jpeg,image/jpg,image/gif">
        <input id="iconURL" type="hidden" name="iconURL" value="{{restaurant.image}}">
        <div class="font-weight-bold text-danger small" id="iconErr" style="display:none"></div>
        <br>
        <table class="table table-dark table-hover tblTheme">
            <tr>
                <th>Location:</th>
                <td>
                    <div class="form-group">
                        <input type="text" name="address" class="form-control" value="{{restaurant.address}}">
                    </div>
                </td>
            </tr>
            <tr>
                <th>Opening Time:</th>
                <td>
                    <div class="form_group">
                        <input type='time' name="open_time" class="form-control" id="open_time"
                            value="{{restaurant.open_time}}" />
                    </div>
                </td>
            </tr>
            <tr>
                <th>Closing Time:</th>
                <td>
                    <div class="form-group">
                        <input type='time' name="close_time" class="form-control" id="close_time"
                            value="{{restaurant.close_time}}" />
                    </div>
                </td>
            </tr>
            <tr>
                <th>Cuisine:</th>
                <td>
                    <select class="form-select" id="cuisine" name="cuisine">
                        <option value="Western" {{restaurant.western}}>Western</option>
                        <option value="Mexican" {{restaurant.mexican}}>Mexican</option>
                        <option value="Thai" {{restaurant.thai}}>Thai</option>
                        <option value="Indian" {{restaurant.indian}}>Indian</option>
                        <option value="Japanese" {{restaurant.japanese}}>Japanese</option>
                        <option value="French" {{restaurant.french}}>French</option>
                        <option value="Chinese" {{restaurant.chinese}}>Chinese</option>
                        <option value="Italian" {{restaurant.italian}}>Italian</option>
                        <option value="Seafood" {{restaurant.seafood}}>Seafood</option>
                        <option value="Local" {{restaurant.local}}>Local</option>
                    </select>
                </td>
            </tr>
            <tr>
                <th>Halal:</th>
                <td>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" value=1 id="halalCheckBox" {{#if
                            restaurant.halal}}checked{{/if}}>
                        <input type="hidden" id="halal" name="halal" value=0>
                    </div>
                </td>
            </tr>
            <tr>
                <th>Email:</th>
                <td>
                    <div class="form-group">
                        <input type="email" class="form-control" name="comp_email" value="{{restaurant.comp_email}}">
                    </div>
                </td>
            </tr>
            <tr>
                <th>Phone:</th>
                <td>
                    <div class="form-group">
                        <input type="number" class="form-control" name="phone" value="{{restaurant.phone}}">
                    </div>
                </td>
            </tr>
            <tr>
                <th>Facebook:</th>
                <td>
                    <div class="form-group">
                        <input type="url" class="form-control" name="facebook" value="{{restaurant.facebook}}">
                    </div>
                </td>
            </tr>
            <tr>
                <th>Twitter:</th>
                <td>
                    <div class="form-group">
                        <input type="url" class="form-control" name="twitter" value="{{restaurant.twitter}}">
                    </div>
                </td>
            </tr>
            <tr>
                <th>Instagram:</th>
                <td>
                    <div class="form-group">
                        <input type="url" class="form-control" name="instagram" value="{{restaurant.instagram}}">
                    </div>
                </td>
            </tr>
        </table>
        <button id="butAddVideo" class="btn-block book-a-table-btn scrollto center"><i class="far fa-share-square"></i> Save Changes </button>
    </form>
</div>



<script>
    $(function () {
        $("#halalCheckBox").on("change", function(){
            if (document.getElementById("halalCheckBox").checked ){
                $("#halal").val(1)
            }
            else{
                $("#halal").val(0)
            }
        })
    });
    $("#restaurantIcon").on("change", function () {
        let image = $("#restaurantIcon")[0].files[0];
        let formdata = new FormData();
        formdata.append("restaurantIcon", image);
        $.ajax({
            url: "/staffRestaurant/upload",
            type: "POST",
            data: formdata,
            contentType: false,
            processData: false,
            success: (data) => {
                $("#icon").attr("src", data.file);
                $("#iconURL").val(data.file); // sets iconURL hidden field
                if (data.err) {
                    $("#iconErr").show();
                    $("#iconErr").text(data.err.message);
                } else {
                    $("#iconErr").hide();
                }
            },
        });
    });
</script>